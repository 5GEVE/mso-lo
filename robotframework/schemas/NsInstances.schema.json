{
  "type":"array",
  "items":{
     "type":"object",
     "required":[
        "id",
        "nsInstanceDescription",
        "nsInstanceName",
        "nsState",
        "nsdId"
     ],
     "properties":{
        "id":{
           "description":"Identifier of the NS instance.",
           "allOf":[
              {
                 "type":"string",
                 "format":"uuid",
                 "description":"An identifier with the intention of being globally unique.\n"
              }
           ]
        },
        "nsInstanceName":{
           "type":"string",
           "description":"Human readable name of the NS instance."
        },
        "nsInstanceDescription":{
           "type":"string",
           "description":"Human readable description of the NS instance."
        },
        "nsdId":{
           "type":"string",
           "description":"Identifier of the NSD on which the NS instance is based."
        },
        "nsState":{
           "type":"string",
           "title":"NsStateType",
           "description":"State of the NS instance. Permitted values:\n * `NOT_INSTANTIATED`: The NS instance is terminated or not instantiated.\n * `INSTANTIATED`: The NS instance is instantiated.",
           "example":"NOT_INSTANTIATED",
           "enum":[
              "NOT_INSTANTIATED",
              "INSTANTIATED"
           ]
        },
        "vnfInstance":{
           "type":"array",
           "description":"Information on constituent VNF(s) of the NS instance.\n",
           "items":{
              "type":"object",
              "required":[
                 "id",
                 "instantiationState",
                 "vnfProductName",
                 "vnfdId"
              ],
              "properties":{
                 "id":{
                    "description":"Identifier of the VNF instance.\n",
                    "allOf":[
                       {
                          "type":"string",
                          "format":"uuid",
                          "description":"An identifier with the intention of being globally unique.\n"
                       }
                    ]
                 },
                 "vnfdId":{
                    "description":"Identifier of the VNFD on which the VNF instance is based.\n",
                    "allOf":[
                       {
                          "type":"string",
                          "format":"uuid",
                          "description":"An identifier with the intention of being globally unique.\n"
                       }
                    ]
                 },
                 "vnfProductName":{
                    "type":"string",
                    "description":"Name to identify the VNF Product. The value is copied from the VNFD.\n"
                 },
                 "vimId":{
                    "description":"Identifier of a VIM that manages resources for the VNF instance.\n",
                    "allOf":[
                       {
                          "type":"string",
                          "format":"uuid",
                          "description":"An identifier with the intention of being globally unique.\n"
                       }
                    ]
                 },
                 "instantiationState":{
                    "type":"string",
                    "description":"The instantiation state of the VNF.\n",
                    "enum":[
                       "NOT_INSTANTIATED",
                       "INSTANTIATED"
                    ]
                 },
                 "instantiatedVnfInfo":{
                    "type":"object",
                    "required":[
                       "vnfState"
                    ],
                    "properties":{
                       "vnfState":{
                          "type":"string",
                          "description":"The state of the VNF instance.\n",
                          "enum":[
                             "STARTED",
                             "STOPPED"
                          ],
                          "example":"STARTED"
                       },
                       "extCpInfo":{
                          "type":"array",
                          "description":"Information about the external CPs exposed by the VNF instance.\n",
                          "items":{
                             "type":"object",
                             "required":[
                                "id"
                             ],
                             "properties":{
                                "id":{
                                   "description":"Identifier of the external CP instance and the related information instance.\n",
                                   "allOf":[
                                      {
                                         "type":"string",
                                         "format":"uuid",
                                         "description":"An identifier that is unique for the respective type within a VNF instance, but may not be globally unique.\n"
                                      }
                                   ]
                                },
                                "cpProtocolInfo":{
                                   "type":"array",
                                   "description":"Network protocol information for this CP.\n",
                                   "items":{
                                      "type":"object",
                                      "required":[
                                         "ipOverEthernet",
                                         "layerProtocol"
                                      ],
                                      "properties":{
                                         "layerProtocol":{
                                            "type":"string",
                                            "description":"The identifier of layer(s) and protocol(s) associated to the network address information. Permitted values: IP_OVER_ETHERNET See note.\n",
                                            "enum":[
                                               "IP_OVER_ETHERNET"
                                            ]
                                         },
                                         "ipOverEthernet":{
                                            "description":"IP addresses over Ethernet to assign to the CP or SAP instance. Shall be present if layerProtocol is equal to \" IP_OVER_ETHERNET\", and shall be absent otherwise.\n",
                                            "allOf":[
                                               {
                                                  "type":"object",
                                                  "required":[
                                                     "ipAddresses",
                                                     "macAddress"
                                                  ],
                                                  "properties":{
                                                     "macAddress":{
                                                        "description":"Assigned MAC address.\n",
                                                        "allOf":[
                                                           {
                                                              "type":"string",
                                                              "format":"MAC",
                                                              "description":"A MAC address. Representation: string that consists of groups of two hexadecimal digits, separated by hyphens or colons.\n"
                                                           }
                                                        ]
                                                     },
                                                     "ipAddresses":{
                                                        "type":"array",
                                                        "description":"Addresses assigned to the CP instance. Each entry represents IP addresses assigned by fixed or dynamic IP address assignment per subnet.\n",
                                                        "items":{
                                                           "type":"object",
                                                           "required":[
                                                              "type"
                                                           ],
                                                           "properties":{
                                                              "type":{
                                                                 "type":"string",
                                                                 "description":"The type of the IP addresses. Permitted values: IPV4, IPV6.\n",
                                                                 "enum":[
                                                                    "IPV4",
                                                                    "IPV6"
                                                                 ]
                                                              },
                                                              "addresses":{
                                                                 "type":"array",
                                                                 "description":"Fixed addresses assigned (from the subnet defined by \"subnetId\" if provided).\n",
                                                                 "items":{
                                                                    "type":"string",
                                                                    "format":"IP",
                                                                    "description":"An IPV4 or IPV6 address. Representation: In case of an IPV4 address, string that consists of four decimal integers separated by dots, each integer ranging from 0 to 255. In case of an IPV6 address, string that consists of groups of zero to four hexadecimal digits, separated by colons.\n"
                                                                 }
                                                              }
                                                           }
                                                        }
                                                     }
                                                  },
                                                  "description":"This type represents information about a network address that has been assigned. It shall comply with the provisions defined in Table 6.5.3.18-1.\n"
                                               }
                                            ]
                                         }
                                      },
                                      "description":"This type describes the protocol layer(s) that a CP or SAP uses together with protocol-related information, like addresses. It shall comply with the provisions defined in Table 6.5.3.58-1.\n"
                                   },
                                   "minItems":1
                                }
                             },
                             "description":"This type represents information about an external CP of a VNF. It shall comply  with the provisions defined in Table 6.5.3.70-1.\n"
                          },
                          "minItems":1
                       }
                    },
                    "description":"Information specific to an instantiated VNF instance. This attribute shall be present if the instantiateState attribute value is INSTANTIATED.\n"
                 }
              },
              "description":"This type represents a VNF instance.\n"
           }
        }
     },
     "title":"NsInstance"
  }
}
